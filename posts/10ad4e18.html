<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>计算机基础 | 2. 计算机硬件组成 | prong的魔法地下室</title><meta name="keywords" content="📓学习笔记,🖥️计算机基础"><meta name="author" content="Prong,prongzmy@outlook.com"><meta name="copyright" content="Prong"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="计算机基础 | 2. 计算机硬件组成"><meta name="application-name" content="计算机基础 | 2. 计算机硬件组成"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="计算机基础 | 2. 计算机硬件组成"><meta property="og:url" content="https://prong879.ltd/posts/10ad4e18.html"><meta property="og:site_name" content="prong的魔法地下室"><meta property="og:description" content="计算机硬件组成 计算机硬件有五大部分：控制器、运算器、储存器、输入设备、输出设备   控制器：计算机的指挥系统。控制器通过地址访问存储器，从存储器中取出指令，经译码器分析后，根据指令分析结果产生相应的操作控制信号作用于其他部件，使得各部件在控制器控制下有条不紊地协调工作。     运算器：实现算术运"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp"><meta property="article:author" content="Prong"><meta property="article:tag" content="prong的地下室"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp"><meta name="description" content="计算机硬件组成 计算机硬件有五大部分：控制器、运算器、储存器、输入设备、输出设备   控制器：计算机的指挥系统。控制器通过地址访问存储器，从存储器中取出指令，经译码器分析后，根据指令分析结果产生相应的操作控制信号作用于其他部件，使得各部件在控制器控制下有条不紊地协调工作。     运算器：实现算术运"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://prong879.ltd/posts/10ad4e18.html"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数众多博主无限进步","addFriendPlaceholder":"昵称：\n链接：\n头像：\n描述：\n站点截图：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: undefined,
  LA51: {"enable":true,"ck":"KcXfHrLj94HMK7QD","LingQueMonitorID":"KcXftMDgWoPfFk7O"},
  greetingBox: undefined,
  twikooEnvId: 'https://twikoo-snowy-two.vercel.app/',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: undefined,
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Prong","link":"链接: ","source":"来源: prong的魔法地下室","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'prong的魔法地下室',
  title: '计算机基础 | 2. 计算机硬件组成',
  postAI: '',
  pageFillDescription: '计算机硬件组成, 处理器, CPU历史, CPU的分类与指令集, CPU指令集权限, 精简指令集, 复杂指令集, 总结：, x86结构以及64位, x86架构, 64位, 运算器和控制器, 运算器, 控制器, 寄存器, 分类, 维护, 处理器设计的演变, 内核态与用户态, 用户态与内核态的空间, 内核态与用户态切换, 多线程和多核芯片, 进程, 线程, 内核线程, 用户线程, 用户线程和内核线程切换, 存储器, 寄存器即L1缓存：, 高速缓存即L2缓存：, 内存：, 磁盘, 原理, 平均寻道时间, 平均延迟时间, 虚拟内存：, 磁带, I/O设备（输入输出设备）, 输入设备, 输出设备, 总线, 启动计算机计算机硬件组成计算机硬件有五大部分控制器运算器储存器输入设备输出设备控制器计算机的指挥系统控制器通过地址访问存储器从存储器中取出指令经译码器分析后根据指令分析结果产生相应的操作控制信号作用于其他部件使得各部件在控制器控制下有条不紊地协调工作运算器实现算术运算和逻辑运算的部件存储器是计算机用来存放所有数据和程序的记忆部件它的基本功能是按指定的地址存写入或者取读出信息计算机中的存储器可分成两大类一类是内存储器简称内存或主存另一类是外存储器辅助存储器简称外存或辅存存储器由若干个存储单元组成每个存储单元都有一个地址计算机通过地址对存储单元进行读写一个存储器所包含的字节数称为存储容量单位有等输入设备是向计算机中输入信息程序数据声音文字图形图像等的设备常见的输入设备有键盘鼠标图形扫描仪触摸屏条形码输入器光笔等外存储器也是一种输入设备输出设备主要有显示器打印机和绘图仪等外存储器也当作一种输出设备控制器运算器内存主存储器以及其他设备都由一条系统总线连接起来并通过总线与其他设备通信是人的大脑负责控制全身和运算内存是人的记忆负责临时存储硬盘是人的笔记本负责永久存储输入设备是耳朵或眼睛或嘴巴负责接收外部的信息存入内存输出设备是你的脸部表情或者屁股负责经过处理后输出的结果以上所有的设备都通过总线连接总线相当于人的神经上课开始老师讲课学生听课老师是程序员学生是计算机学生的器官都是计算机各部分组成你通过耳朵接收老师讲的知识输入通过自己的神经将接收的数据存入自己的内存短期记忆总线内存光听不行你还需要反应处理老师讲的知识于是你的大脑从短期记忆里取出知识指令分析知识指令然后学习知识执行指令取指分析执行你通过作业或者说话输出你学到的结果你想要永久将知识保存下来只能拿出一个笔记本把刚刚学会的知识都写到本子上这个本子就是硬盘磁盘处理器通常将运算器和控制器合称为中央处理器其中运算器用来主要负责程序运算与逻辑判断控制器则主要协调各组件和各单元的工作所以的工作主要在于管理和运算可以说计算机的大脑就是它从内存中取指令解码执行然后再取指解码执行下一条指令周而复始直至整个程序被执行完成既然的重点在于进行运算和判断那么要被运算与判断的数据是从哪里来的读取的数据都是从主存储器内存来的主存储器内的数据则是从输入单元所传输进来而处理完毕的数据也必须先写回主存储器中最后数据才从主存储器传输到输出单元在超大规模集成电路构成的微型计算机中往往将制成一块具有特定功能的芯片称为微处理器芯片里边有编写好的微指令集我们在主机上的所有操作或者说任何软件的执行最终都要转化成的指令去执行如输入输出阅读视频上网等这些都要参考是否内置有相关微指令集才行如果没有那么无法处理这些操作不同的指令集不同对应的功能也不同这就好比不同的人脑对于大多数人类来说人脑的结构一样但是大家的智商都有差别历史微处理器由一片或少数几片大规模集成电路组成的中央处理器这些电路执行控制部件和算术逻辑部件的功能微处理器能完成取指令执行指令以及与外界存储器和逻辑部件交换信息等操作是微型计算机的运算控制部分它可与存储器和外围电路芯片组成微型计算机计算机的发展主要表现在其核心部件微处理器的发展上每当一款新型的微处理器出现时就会带动计算机系统的其他部件的相应发展如计算机体系结构的进一步优化存储器存取容量的不断增大存取速度的不断提高外围设备的不断改进以及新设备的不断出现等根据微处理器的字长和功能可将其发展划分为以下几个阶段第阶段年是位和位低档微处理器时代通常称为第代第阶段年是位中高档微处理器时代通常称为第代第阶段年是位微处理器时代通常称为第代第阶段年是位微处理器时代又称为第代第阶段年是奔腾系列微处理器时代通常称为第代第阶段年至今是酷睿系列微处理器时代通常称为第代酷睿是一款领先节能的新型微架构设计的出发点是提供卓然出众的性能和能效提高每瓦特性能也就是所谓的能效比处理器逐渐向更多核心更高并行度发展典型的代表有英特尔的酷睿系列处理器和的锐龙系列处理器若想具体了解历史参见百度百科中央处理器的分类与指令集指令集权限在说用户态与内核态之前有必要说一下指令集指令集是实现软件指挥硬件执行的媒介具体来说每一条汇编语句都对应了一条指令而非常非常多的指令在一起可以组成一个甚至多个集合指令的集合叫指令集同时为避免指令操作不规范而导致对计算机系统造成损坏指令集设置了权限分级以为例把指令集操作的权限由高到低划为级其中权限最高可以使用所有指令集权限最低仅能使用常规指令集不能使用操作硬件资源的指令集比如读写网卡访问申请内存都不行系统仅采用和这个权限高情商被叫做内核态完全在操作系统内核中运行由专门的内核线程在中执行其任务被叫做用户态在应用程序中运行由用户线程在中执行其任务低情商执行内核空间的代码具有保护级别有对硬件的所有操作权限可以执行所有指令集访问任意地址的内存在内核模式下的任何异常都是灾难性的将会导致整台机器停机在用户模式下具有保护级别代码没有对硬件的直接控制权限也不能直接访问地址的内存程序是通过调用系统接口来达到访问硬件和内存在这种保护模式下即时程序发生崩溃也是可以恢复的在电脑上大部分程序都是在用户模式下运行的我们已经知道内部是含有微指令集的我们所使用的的软件都要经过内部的微指令集来完成才行这些指令集的设计主要又被分为两种设计理念这就是目前世界上常见到的两种主要的种类分别是精简指令集与复杂指令集系统下面我们就来谈谈这两种不同种类的差异精简指令集精简指令集这种的设计中微指令集较为精简每个指令的运行时间都很短完成的动作也很单纯指令的执行效能较佳但是若要做复杂的事情就要由多个指令来完成常见的指令集主要例如公司的系列公司的包括系列与系列等注已经被收购架构的计算机常用于学术领域的大型工作站中包括银行金融体系的主服务器也都有这类的计算机架构架构的应用如出产的使用的就是该架构的处理器是世界上使用范围最广的了常用的各厂商的手机导航系统网络设备等几乎都用该架构的复杂指令集复杂指令集与不同在的微指令集中每个小指令可以执行一些较低阶的硬件操作指令数目多而且复杂每条指令的长度并不相同因此指令执行较为复杂所以每条指令花费的时间较长但每条个别指令可以处理的工作较为丰富常见的微指令集主要有等的架构的一般认为硬件直接支持的数学计算公式执行效率最高就是因为指令集中包含这个数学公式数学计算只需要一条指令就可以执行完毕反之就需要通过多条指令以组合的方式完成数学计算需要执行多条指令在空间和时间复杂度上都会复杂倍所以请大家理解执行效率高低的来源当然指令集只是制约执行效率高低的其中一个因素但是该因素绝对是重量级的起决定性的因素总结按照指令集可以分为精简指令集和复杂指令集两种区别在于前者的指令集精简每个指令的运行时间都很短完成的动作也很单纯指令的执行效能较佳但是若要做复杂的事情就要由多个指令来完成后者的指令集每个小指令可以执行一些较低阶的硬件操作指令数目多而且复杂每条指令的长度并不相同因为指令执行较为复杂所以每条指令花费的时间较长但每条个别指令可以处理的工作较为丰富结构以及位架构是针对的型号或者说架构的一种统称详细地讲最早的那颗发明出来的代号称为后来在的基础上又开发出了因此这种架构的就被统称为架构了由于所开发出来的架构被大量使用于个人计算机上面因此个人计算机常被称为架构的计算机程序员开发出的软件最终都要翻译成的指令集才能运行因此软件的版本必须与的架构契合举个例子我们在官网下载软件时名字为我们发现名字中有这其实就是告诉我们该软件应该运行在架构的计算机上位的位数指的是一次性能从内存中取出多少位二进制指令指的是一次性能从内存中取出位二进制指令在年以前由所开发的架构由位升级到位后来依此架构修改新一代的为位到现在个人计算机通常都是的架构具有向下兼容性指的是位的既可以运行位的软件也可以运行位的软件而位的只能运行位的软件这其实很好理解如果把的位数当成是车道的宽而内存中软件的指令当做是待通行的车辆宽的车道每次肯定既可以通行辆车也可以通信辆车而宽的车道每次却只能通行辆车运算器和控制器常将运算器和控制器合称为中央处理器其中运算器用来主要负责程序运算与逻辑判断控制器则主要协调各组件和各单元的工作所以的工作主要在于管理和运算可以说计算机的大脑就是运算器运算器是对信息进行处理和运算的部件经常进行的运算是算术运算和逻辑运算所以运算器又可称为算术逻辑运算部件运算器的核心是加法器运算器中还有若干个通用寄存器或累加寄存器用来暂存操作数并存放运算结果寄存器的存取速度比存储器的存放速度快很多控制器控制器是整个计算机的指挥中心它的主要功能是按照人们预先确定的操作步骤控制整个计算机的各部件有条不紊的自动工作控制器从主存中逐条地读取出指令进行分析根据指令的不同来安排操作顺序向各部件发出相应的操作信号控制它们执行指令所规定的任务控制器中包括一些专用的寄存器寄存器因访问内存以得到指令或数据的时间比执行指令花费的时间要长得多所以所有内部都有一些用来保存关键变量和临时数据的寄存器这样通常在的指令集中专门提供一些指令用来将一个字可以理解为数据从内存调入寄存器以及将一个字从寄存器存入内存其他的指令集可以把来自寄存器内存的操作数据组合或者用两者产生一个结果比如将两个字相加并把结果存在寄存器或内存中分类除了用来保存变量和临时结果的通用寄存器外多数计算机还有一些对程序员课件的专门寄存器其中之一便是程序计数器它保存了将要取出的下一条指令的内存地址在指令取出后程序计算器就被更新以便执行后期的指令另外一个寄存器便是堆栈指针它指向内存中当前栈的顶端该栈包含已经进入但是还没有退出的每个过程中的一个框架在一个过程的堆栈框架中保存了有关的输入参数局部变量以及那些没有保存在寄存器中的临时变量最后一个非常重要的寄存器就是程序状态字寄存器这个寄存器包含了条码位由比较指令设置优先级模式用户态或内核态以及各种其他控制位用户通常读入整个但是只对其中少量的字段写入在系统调用和中非常非常非常非常非常非常重要维护操作系统必须知晓所有的寄存器在时间多路复用的中操作系统会经常中止正在运行的某个程序并启动或再次启动另一个程序每次停止一个运行着的程序时操作系统必须保存所有的寄存器这样在稍后该程序被再次运行时可以把这些寄存器重新装入处理器设计的演变最开始取值解码执行这三个过程是同时进行的这意味着任何一个过程完成都需要等待其余两个过程执行完毕时间浪费后来被设计成了流水线式的设计即执行指令时可以对指令解码并且可以读取指令完全是一套流水线超变量比流水线更加先进有多个执行单元可以同时负责不同的事情比如看片的同时听歌打游戏两个或更多的指令被同时取出解码并装入一个保持缓冲区中直至它们都执行完毕只有有一个执行单元空闲就检查保持缓冲区是否还有可处理的指令这种设计存在一种缺陷即程序的指令经常不按照顺序执行在多数情况下硬件负责保证这种运算结果与顺序执行的指令时的结果相同内核态与用户态张三是某科技公司的初级开发工程师低权限目前在楼办公码代码公司提供的资源仅有一套电脑用户态张三想着这一线的房价倍感压力山大于是给自己定下一个目标一定要做技术总监在一线扎根奋斗张三奋斗年终于当上了技术总监高权限之后张三搬到楼可以随时向资源部系统调用申请公司各种资源与获取公司的机密信息内核态所谓是走上人生巅峰通过这个故事我们发现低权限的资源范围较小高权限的资源范围更大所谓的用户态与内核态只是不同权限的资源范围通关了指令集权限现在再说用户态与内核态就十分简单了用户态与内核态的概念就是指令集权限的区别进程中要读写必然会用到级别的指令集而此时的指令集操作权限只有为了可以操作级别的指令集切换指令集操作权限级别为再执行相应的级别的指令集内核代码执行的内核代码会使用当前进程的内核栈每个进程都有两个栈分别是用户栈与内核栈对应用户态与内核态的使用除了在嵌入式系统中的非常简单的之外多数都有两种模式即内核态与用户态通常中有一个二进制位控制这两种模式内核态当在内核态运行时可以执行指令集中所有的指令很明显所有的指令中包含了使用硬件的所有功能操作系统在内核态下运行从而可以访问整个硬件用户态用户程序在用户态下运行仅仅只能执行整个指令集的一个子集该子集中不包含操作硬件功能的部分因此一般情况下在用户态中有关和内存保护操作系统占用的内存是受保护的不能被别的程序占用当然在用户态下将中的模式设置成内核态也是禁止的用户态与内核态的空间在内存资源上的使用操作系统对用户态与内核态也做了限制每个进程创建都会分配虚拟空间地址以位操作系统为例它的寻址空间范围是的次方而操作系统会把虚拟控制地址划分为两部分一部分为内核空间另一部分为用户空间高位的从虚拟地址到由内核使用而低位的从虚拟地址到由各个进程使用用户态只能操作范围的低位虚拟空间地址内核态范围的虚拟空间地址都可以操作尤其是对范围的高位虚拟空间地址必须由内核态去操作补充部分大家是共享的指所有进程的内核态逻辑地址是共享同一块内存地址是内核态的地址空间这里存放在整个内核的代码和所有的内核模块以及内核所维护的数据每个进程的虚拟空间地址高位都是一样的即内核空间只有剩余的才归进程自己使用换句话说就是高位的内核空间是被所有进程共享的最后做个小结我们通过指令集权限区分用户态和内核态还限制了内存资源的使用操作系统为用户态与内核态划分了两块内存空间给它们对应的指令集使用内核态与用户态切换用户态下工作的软件不能操作硬件但是我们的软件比如暴风影音一定会有操作硬件的需求比如从磁盘上读一个电影文件那就必须经历从用户态切换到内核态的过程为此用户程序必须使用系统调用系统调用陷入内核并调用操作系统指令把用户态切换成内核态并启用操作系统从而获得服务请把的系统调用看成一个特别的的过程调用指令就可以了该指令具有从用户态切换到内核态的特别能力相信大家都听过这样的话用户态和内核态切换的开销大但是它的开销大在那里呢简单点来说有下面几点保留用户态现场上下文寄存器用户栈等复制用户态参数用户栈切到内核栈进入内核态额外的检查因为内核代码对用户不信任执行内核态代码复制内核态代码执行结果回到用户态恢复用户态现场上下文寄存器用户栈等实际上操作系统会比上述的更复杂这里只是个大概我们可以发现一次切换经历了用户态内核态用户态用户态要主动切换到内核态那必须要有入口才行实际上内核态是提供了统一的入口下面是整体架构图从上图我们可以看出来通过系统调用将整个体系分为用户态和内核态为了使应用程序访问到内核的资源如内存内核必须提供一组通用的访问接口这些接口就叫系统调用库函数就是屏蔽这些复杂的底层实现细节减轻程序员的负担从而更加关注上层的逻辑实现它对系统调用进行封装提供简单的基本接口给程序员顾名思义就是外壳的意思就好像把内核包裹起来的外壳它是一种特殊的应用程序俗称命令行也是可编程的它有标准的语法符合其语法的文本叫脚本很多人都会用脚本实现一些常用的功能可以提高工作效率最后来说说什么情况会导致用户态到内核态切换系统调用用户态进程主动切换到内核态的方式用户态进程通过系统调用向操作系统申请资源完成工作例如就是一个创建新进程的系统调用系统调用的机制核心使用了操作系统为用户特别开放的一个中断来实现如的中断也可以称为软中断异常当在执行用户态的进程时发生了一些没有预知的异常这时当前运行进程会切换到处理此异常的内核相关进程中也就是切换到了内核态如缺页异常中断当在执行用户态的进程时外围设备完成用户请求的操作后会向发出相应的中断信号这时会暂停执行下一条即将要执行的指令转到与中断信号对应的处理程序去执行也就是切换到了内核态如硬盘读写操作完成系统会切换到硬盘读写的中断处理程序中执行后边的操作等多线程和多核芯片定律指出芯片中的晶体管数量每个月翻一倍随着晶体管数量的增多更强大的功能成为了可能如第一步增强在芯片中加入更大的缓存一级缓存用和相同的材质制成访问它没有时延第二步增强一个中的处理逻辑增多公司首次提出称为多线程或超线程对用户来说一个有两个线程的就相当于两个我们后面要学习的进程和线程的知识就起源于这里进程是资源单位而线程才是的执行单位多线程运行保持两个不同的线程状态可以在纳秒级的时间内来回切换速度快到你看到的结果是并发的伪并行的然而多线程不提供真正的并行处理一个同一时刻只能处理一个进程一个进程中至少一个线程第三步增强除了多线程还出现了傲寒个或者个完整处理器的芯片如下图要使用这类多核芯片肯定需要有多处理操作系统进程面试都会问什么是进程什么是线程吧一般我们对进程的回答是系统调度资源的最小或基本单位怎么理解呢系统内核中进程就是一段记录专有资源和状态的结构体就是一个数据结构或者理解为一个存储资源信息的对象结构体其存储的信息就是这些标识符与进程相关的唯一标识符用来区别正在执行的进程和其他进程状态描述进程的状态因为进程有挂起阻塞运行等好几个状态所以都有个标识符来记录进程的执行状态优先级如果有好几个进程正在执行就涉及到进程被执行的先后顺序的问题这和进程优先级这个标识符有关程序计数器程序中即将被执行的下一条指令的地址内存指针程序代码和进程相关数据的指针上下文数据进程执行时处理器的寄存器中的数据状态信息包括显示的请求分配给进程的设备和被进程使用的文件费宇极致内核记账信息包括处理器的时间总和记账号等等对于结构体不理解请看语言语法很简单就是中的对象只不过结构体内部只有属性没有方法这个结构体有个专门的名字也叫进程控制块数据保存在进程内存虚拟地址中的内核态中也就是内存这一段内显然用户态时是无法访问的想要访问就必须从用户态切换到内核态而且这么核心的数据直接暴露给用户程序也是很危险的进程在内核中就是这么个东西就是一个叫的结构体系统内核中有一个用来存储调度进程线程线程在内核中同进程一样也是一个结构体线程在出来之后就是把进程的复制一份给自己然后加上没有的程序计数器堆栈状态寄存器这些信息线程的结构体叫做线程本质上就是多了一个任务列表就是栈帧这个东西大家想线程为什么能共享堆内存资源呢怎么做到的呢真的很简单把进程资源信息复制一份给自己的就行了所以这里大家体会下换个角度理解进程线程进程是向系统内核申请资源的最小基本单位线程是竞争资源的最小基本单位进程申请的是内存资源线程竞争的是资源内核线程线程分内核线程用户线程内核线程的和进程的保存在一个位置都是在的内核地址内存中系统内核中调度的是内核线程不是用户线程内核线程一样有自己的栈帧所有的代码都淂切换到内核线程来执行用户线程有了内核线程为什么还得设计用户线程呢不用想就是为了和指令权限对应为的就是权限责任分明系统内核操作硬件操作安全权限高的代码必须得在内核中执行用户不能碰用户自己的低权限代码在用户自己的线程中执行就好了这样设计代码分层扩展性能好相互不影响中默认采用线程模型就是有一个用户线程就得在内核中启动一个对应的内核线程然后把这个用户线程绑定到内核线程上当然还有其他的对应方式这就得依靠第三方实现方案了标准函数库线程函数库就是线程模型这点大家想想中的线程为啥就能实现资源内存隔离肯定就是自己做出修改的需要说一下采用默认函数库也就是线程模型一个时是创建了个用户线程和内核线程的然后把用户线程绑定到内线线程中的代码在用户线程中执行的代码切换到内核线程中去执行然后使用内核线程接受系统内核的调度内核线程抢到时间片后用户线程就会激活执行代码用户线程的保存在进程虚拟地址空间的堆内存中对于系统内核来说是不可见的所以线程的调度是由内核线程来承担处理用户线程和内核线程切换用户线程和内核线程的区别就是位置的不同执行的代码权限级别不同然后内核线程会接受操作系统内核调度单元的调度指令那么对于用户线程和内核线程的切换怎么理解呢大家就当做个线程切换就好了用户线程和内核线程都有自己的栈帧寄存器值加载的缓存等属于自己线程的数据用户线程到内核线程的切换一样会涉及这些线程上下文的切换性能损失在这里一般来说像操作这些都是淂在内核线程中去执行所以代码就会涉及到用户态到内核态的切换其中性能损失就是线程上下文的切换重点是操作会造成频繁的造成用户态到内核态再到用户态的切换优化的重点是减少切换所以很重要实现了不用借助系统中断不用到内核态执行系统函数直接往硬盘中读写数据少了用户态到内核态的切换所以性能好效率高好了就这么多这么理解就行了不用想的太复杂就是这么回事用户态用户线程内核态内核线程者的区别就是对内存操作的范围有区别对指令的操作权限有区别存储器计算机中第二重要的就是存储了所有人都意淫着存储速度快这样的等待存储器的延迟就降低了容量大价钱便宜同时兼备三者是不可能的所以有了如下的不同的处理方式存储器系统采用如上图的分层结构顶层的存储器速度较高容量较小与底层的存储器相比每位的成本较高其差别往往是十亿数量级的寄存器即缓存用与相同材质制造与一样快因而访问它无时延典型容量是在位中为在位中为在两种情况下容量均高速缓存即缓存主要由硬件控制高速缓存的存取内存中有高速缓存行按照字节为行为行最常用的高速缓存行放置在内部或者非常接近的高速缓存中当某个程序需要读一个存储字时高速缓存硬件检查所需要的高速缓存行是否在高速缓存中如果是则称为高速缓存命中缓存满足了请求就不需要通过总线把访问请求送往主存内存这毕竟是慢的高速缓存的命中通常需要两个时钟周期高速缓存为命中就必须访问内存这需要付出大量的时间代价由于高速缓存价格昂贵所以其大小有限有些机器具有两级甚至三级高速缓存每一级高速缓存比前一级慢但是容易大缓存在计算机科学的许多领域中起着重要的作用并不仅仅只是随机存取存储器的缓存行只要存在大量的资源可以划分为小的部分那么这些资源中的某些部分肯定会比其他部分更频发地得到使用此时用缓存可以带来性能上的提升一个典型的例子就是操作系统一直在使用缓存比如多数操作系统在内存中保留频繁使用的文件的一部分以避免从磁盘中重复地调用这些文件类似的的长路径名转换成该文件所在的磁盘地址的结果然后放入缓存可以避免重复寻找地址还有一个页面的地址转换为网络地址地址后这个转换结果也可以缓存起来供将来使用缓存是一个好方法在现代中设计了两个缓存再看中的两种设计图第一级缓存称为总是在中通常用来将已经解码的指令调入的执行引擎对那些频繁使用的数据自多少芯片还会按照第二缓存另外往往设计有二级缓存用来存放近来经常使用的内存字与的差别在于对对的访问无时间延迟而对的访问则有个时钟周期即的延迟内存再往下一层是主存此乃存储器系统的主力主存通常称为随机访问存储就是我们通常所说的内存容量一直在不断攀升所有不能再高速缓存中找到的都会到主存中找主存是易失性存储断电后数据全部消失除了主存之外许多计算机已经在使用少量的非易失性随机访问存储如在电源切断之后非易失性存储的内容并不会丢失只读存储器在工厂中就被编程完毕然后再也不能修改速度快且便宜在有些计算机中用于启动计算机的引导加载模块就存放在中另外一些卡也采用处理底层设备的控制电可擦除可编程和闪存也是非易失性的但是与相反他们可以擦除和重写不过重写时花费的时间比写入要多在便携式电子设备中中闪存通常作为存储媒介闪存是数码相机中的胶卷是便携式音译播放器的磁盘还应用于固态硬盘闪存在速度上介于和磁盘之间但与磁盘不同的是闪存擦除的次数过多就被磨损了还有一类存储器就是它是易失性的许多计算机利用存储器来保持当前时间和日期存储器和递增时间的电路由一小块电池驱动所以即使计算机没有加电时间也仍然可以正确地更新除此之外还可以保存配置的参数比如哪一个是启动磁盘等之所以采用是因为它耗电非常少一块工厂原装电池往往能使用若干年但是当电池失效时相关的配置和时间等都将丢失磁盘原理磁盘低速的原因是因为它一种机械装置在磁盘中有一个或多个金属盘片它们以或每分钟多少转的速度旋转从边缘开始有一个机械臂悬在盘面上这类似于老式黑胶唱片机上的拾音臂信息卸载磁盘上的一些列的同心圆上是一连串的进制位称为位为了统计方法个称为一个字节所以我们平时所说的磁盘容量最终指的就是磁盘能写多少个进制位括号中的数字为的指数即多少次方相当于一个英文字母相当於一则短篇故事的内容相当於一则短篇小说的文字内容相当於贝多芬第五乐章交响曲的乐谱内容相当於一家大型医院中所有的光图片资讯量相当於的全美学术研究图书馆藏书资讯内容相当於至今全世界人类所讲过的话语如同全世界海滩上的沙子数量总和相当於位人类体内的微细胞总和每个磁头可以读取一段换新区域称为磁道把一个戈丁手臂位置上所以的磁道合起来组成一个柱面每个磁道划成若干扇区扇区典型的值是字节数据都存放于一段一段的扇区即磁道这个圆圈的一小段圆圈从磁盘读取一段数据需要经历寻道时间和延迟时间平均寻道时间机械手臂从一个柱面随机移动到相邻的柱面的时间成为寻到时间找到了磁道就以为着招到了数据所在的那个圈圈但是还不知道数据具体这个圆圈的具体位置平均延迟时间机械臂到达正确的磁道之后还必须等待旋转到数据所在的扇区下这段时间成为延迟时间虚拟内存许多计算机支持虚拟内存机制该机制使计算机可以运行大于物理内存的程序方法是将正在使用的程序放入内存取执行而暂时不需要执行的程序放到磁盘的某块地方这块地方成为虚拟内存在中成为这种机制的核心在于快速地映射内存地址由中的一个部件负责成为存储器管理单元从一个程序切换到另外一个程序成为上下文切换缓存和的出现提升了系统的性能尤其是上下文切换磁带在价钱相同的情况下比硬盘拥有更高的存储容量虽然速度低于磁盘但是因其大容量在地震水灾火灾时可移动性强等特性常被用来做备份常见于大型数据库系统中设备输入输出设备和存储器并不是操作系统唯一需要管理的资源设备也是非常重要的一环见四中的图设备一般包括两个部分设备控制器和设备本身控制器是查找主板上的一块芯片或一组芯片硬盘网卡声卡等都需要插到一个口上这个口连的便是控制器控制器负责控制连接的设备它从操作系统接收命令比如读硬盘数据然后就对硬盘设备发起读请求来读出内容控制器的功能通常情况下对设备的控制是非常复杂和具体的控制器的任务就是为操作系统屏蔽这些复杂而具体的工作提供给操作系统一个简单而清晰的接口设备本身有相对简单的接口且标准的这样大家都可以为其编写驱动程序了要想调用设备必须根据该接口编写复杂而具体的程序于是有了控制器提供设备驱动接口给操作系统必须把设备驱动程序安装到操作系统中输入设备输入设备的任务是把人们编好的程序和原始数据送到计算机中去并且将他们转换成计算机内存所能识别和接受的信息方式安输入信息的形态可分为字符包括汉字输入图形输入图像输入及语言输入等目前常见的输入设备有键盘鼠标扫描仪等辅助存储器磁盘磁带也可以看作输入设备另外自动控制和检测系统中使用的模数转换装置也是一种输入设备输出设备输出设备的任务是将计算机的处理结果以人或其他设备所能接受的形式送出计算机目前最常用的输出设备是打印机和显示器辅助存储器也可以看做输出设备另外数模转换装置也是一种输出设备总线四小节中的结构在小型计算机中沿用了多年并也用在早期的中但是随着处理器和存储器速度越来越快单总线很难处理总线的交通流量了于是出现了下图的多总线模式他们处理设备及到存储器的速度都更快北桥即桥图形与内存控制器连接高速设备负责与内存的数据交换图形处理与数据交换南桥即桥输入输出控制器连接慢速设备负责系统的输入输出功能现在的制造工艺越来越先进集成度越来越高内存控制器已被集成到里就连显卡也被收进了就是我们所说的核显而控制器收归南桥管理了因此北桥芯片组的功能被瓜分了所以现在的芯片组把北桥取消掉只剩南桥了而也只有早期的主板还保留着北桥和南桥启动计算机在计算机的主板上有一个基本的输入输出程序就相当于一个小的操作系统它有底层的软件包括读键盘写屏幕进行磁盘该程序存放于一非易失性闪存中启动流程计算机加电开始运行检测硬件内存硬盘等读取存储器中的参数选择启动设备从启动设备上读取第一个扇区的内容主引导记录字节前为引导信息后为分区信息最后两个为标志位根据分区信息读入启动装载模块启动操作系统然后操作系统询问以获得配置信息对于每种设备系统会检查其设备驱动程序是否存在如果没有系统则会要求用户按照设备驱动程序一旦有了全部的设备驱动程序操作系统就将它们调入内核然后初始有关的表格如进程表穿件需要的进程并在每个终端上启动登录程序或引用列表',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-01-09 23:32:01',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="prong的魔法地下室" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">prong的魔法地下室</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文库</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="fa-solid fa-timeline faa-tada"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="fas fa-tags faa-tada"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fas fa-folder-open faa-tada"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messageboard/"><i class="fa fa-comments faa-tada"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 修仙</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/books/"><i class="fa-solid fa-book-open-reader faa-tada"></i><span> 书单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><i class="fa-solid fa-film faa-tada"></i><span> 电影</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/games/"><i class="fa-brands fa-xbox faa-tada"></i><span> 游戏</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="fa-brands fa-bilibili faa-tada"></i><span> 番剧</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/cinemas/"><i class="fa-brands fa-bilibili faa-tada"></i><span> B站追剧</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/update/"><i class="fa-solid fa-file-pen faa-tada"></i><span> 更新手账</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="fa-solid fa-person-through-window faa-tada"></i><span> 关于自己</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/mm_facetoface_collect_qrcode_1730547752845.webp" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/mm_facetoface_collect_qrcode_1730547752845.webp"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/1730547802675.webp" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/1730547802675.webp"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/ARCH%E6%A8%A1%E5%9E%8B/" style="font-size: 1.05rem;">ARCH模型<sup>1</sup></a><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>4</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">C语言<sup>5</sup></a><a href="/tags/MySQL/" style="font-size: 1.05rem;">MySQL<sup>1</sup></a><a href="/tags/PPT/" style="font-size: 1.05rem;">PPT<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>2</sup></a><a href="/tags/Zerotier/" style="font-size: 1.05rem;">Zerotier<sup>1</sup></a><a href="/tags/hexo/" style="font-size: 1.05rem;">hexo<sup>3</sup></a><a href="/tags/%E2%9C%92%EF%B8%8F%E9%9A%8F%E7%AC%94/" style="font-size: 1.05rem;">✒️随笔<sup>13</sup></a><a href="/tags/%E4%B8%89%E4%B8%8B%E4%B9%A1/" style="font-size: 1.05rem;">三下乡<sup>1</sup></a><a href="/tags/%E4%BF%9D%E9%99%A9%E5%AD%A6/" style="font-size: 1.05rem;">保险学<sup>1</sup></a><a href="/tags/%E5%95%86%E4%B8%9A%E9%93%B6%E8%A1%8C/" style="font-size: 1.05rem;">商业银行<sup>1</sup></a><a href="/tags/%E5%9B%BD%E5%80%BA/" style="font-size: 1.05rem;">国债<sup>1</sup></a><a href="/tags/%E5%9B%BD%E9%99%85%E8%B4%B8%E6%98%93/" style="font-size: 1.05rem;">国际贸易<sup>1</sup></a><a href="/tags/%E5%A4%A7%E7%BA%B2%E7%AC%94%E8%AE%B0/" style="font-size: 1.05rem;">大纲笔记<sup>1</sup></a><a href="/tags/%E5%AE%9E%E8%AF%81%E5%88%86%E6%9E%90/" style="font-size: 1.05rem;">实证分析<sup>1</sup></a><a href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/" style="font-size: 1.05rem;">密码学<sup>1</sup></a><a href="/tags/%E5%BE%AE%E8%BD%AF%E8%BE%93%E5%85%A5%E6%B3%95/" style="font-size: 1.05rem;">微软输入法<sup>1</sup></a><a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 1.05rem;">摄影<sup>1</sup></a><a href="/tags/%E6%94%AF%E6%95%99%E6%97%A5%E8%AE%B0/" style="font-size: 1.05rem;">支教日记<sup>4</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">教程<sup>7</sup></a><a href="/tags/%E6%95%B0%E5%AD%97%E8%B4%A7%E5%B8%81/" style="font-size: 1.05rem;">数字货币<sup>1</sup></a><a href="/tags/%E6%A6%82%E7%8E%87%E8%AE%BA%E4%B8%8E%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1/" style="font-size: 1.05rem;">概率论与数理统计<sup>2</sup></a><a href="/tags/%E7%B2%AE%E9%A3%9F%E5%8D%B1%E6%9C%BA/" style="font-size: 1.05rem;">粮食危机<sup>1</sup></a><a href="/tags/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/" style="font-size: 1.05rem;">线性代数<sup>2</sup></a><a href="/tags/%E7%BE%8E%E5%8C%96/" style="font-size: 1.05rem;">美化<sup>1</sup></a><a href="/tags/%E8%8C%85%E5%8F%B0/" style="font-size: 1.05rem;">茅台<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BA%8C%E7%BA%A7/" style="font-size: 1.05rem;">计算机二级<sup>1</sup></a><a href="/tags/%E8%AE%A1%E9%87%8F%E7%BB%8F%E6%B5%8E%E5%AD%A6/" style="font-size: 1.05rem;">计量经济学<sup>9</sup></a><a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 1.05rem;">论文<sup>7</sup></a><a href="/tags/%E9%AB%98%E7%B2%B1/" style="font-size: 1.05rem;">高粱<sup>1</sup></a><a href="/tags/%E9%AD%94%E6%94%B9/" style="font-size: 1.05rem;">魔改<sup>2</sup></a><a href="/tags/%F0%9F%8C%90%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" style="font-size: 1.05rem;">🌐网络协议<sup>1</sup></a><a href="/tags/%F0%9F%92%B0%E5%BE%AE%E8%A7%82%E7%BB%8F%E6%B5%8E%E5%AD%A6/" style="font-size: 1.05rem;">💰微观经济学<sup>1</sup></a><a href="/tags/%F0%9F%93%93%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 1.05rem;">📓学习笔记<sup>43</sup></a><a href="/tags/%F0%9F%94%A0LaTeX/" style="font-size: 1.05rem;">🔠LaTeX<sup>1</sup></a><a href="/tags/%F0%9F%94%A0MarkDown/" style="font-size: 1.05rem;">🔠MarkDown<sup>1</sup></a><a href="/tags/%F0%9F%94%A0%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95/" style="font-size: 1.05rem;">🔠英语语法<sup>4</sup></a><a href="/tags/%F0%9F%96%A5%EF%B8%8F%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">🖥️计算机基础<sup>5</sup></a><a href="/tags/%F0%9F%A6%8Bbutterfly/" style="font-size: 1.05rem;">🦋butterfly<sup>3</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">转载</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url">学习笔记</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%F0%9F%93%93%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>📓学习笔记</span></a><a class="article-meta__tags" href="/tags/%F0%9F%96%A5%EF%B8%8F%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>🖥️计算机基础</span></a></span></div></div><h1 class="post-title" itemprop="name headline">计算机基础 | 2. 计算机硬件组成</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-01-09T15:32:01.000Z" title="发表于 2023-01-09 23:32:01">2023-01-09</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-01-09T15:32:01.000Z" title="更新于 2023-01-09 23:32:01">2023-01-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">12.2k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>37分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="计算机基础 | 2. 计算机硬件组成"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为南京"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>南京</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://www.cnblogs.com/linhaifeng/p/6523843.html"><header><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url">学习笔记</a><a href="/tags/%F0%9F%93%93%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" tabindex="-1" itemprop="url">📓学习笔记</a><a href="/tags/%F0%9F%96%A5%EF%B8%8F%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url">🖥️计算机基础</a><h1 id="CrawlerTitle" itemprop="name headline">计算机基础 | 2. 计算机硬件组成</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">林海峰</span><time itemprop="dateCreated datePublished" datetime="2023-01-09T15:32:01.000Z" title="发表于 2023-01-09 23:32:01">2023-01-09</time><time itemprop="dateCreated datePublished" datetime="2023-01-09T15:32:01.000Z" title="更新于 2023-01-09 23:32:01">2023-01-09</time></header><h1>计算机硬件组成</h1>
<p>计算机硬件有五大部分：控制器、运算器、储存器、输入设备、输出设备</p>
<blockquote>
<ol>
<li>控制器：计算机的指挥系统。控制器通过地址访问存储器，从存储器中取出指令，经译码器分析后，根据指令分析结果产生相应的操作控制信号作用于其他部件，使得各部件在控制器控制下有条不紊地协调工作。</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>运算器：实现算术运算和逻辑运算的部件。</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li>存储器：是计算机用来存放所有数据和程序的记忆部件。它的基本功能是按指定的地址存（写）入或者取（读）出信息。 计算机中的存储器可分成两大类：一类是内存储器，简称内存或主存；另一类是外存储器（辅助存储器），简称外存或辅存。 存储器由若干个存储单元组成，每个存储单元都有一个地址，计算机通过地址对存储单元进行读写。一个存储器所包含的字节数称为存储容量，单位有B、KB、MB、GB、TB等。</li>
</ol>
</blockquote>
<blockquote>
<ol start="4">
<li>输入设备：是向计算机中输入信息（程序、数据、声音、文字、图形、图像等）的设备。常见的输入设备有：键盘、鼠标、图形扫描仪、触摸屏、条形码输入器、光笔等。 外存储器也是一种输入设备。</li>
</ol>
</blockquote>
<blockquote>
<ol start="5">
<li>输出设备：主要有显示器、打印机和绘图仪等。外存储器也当作一种输出设备。</li>
</ol>
</blockquote>
<p>控制器+运算器=CPU</p>
<p>CPU、内存(主存储器)以及其他I/O设备都由一条系统总线（bus）连接起来并通过总线与其他设备通信</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic4.zhimg.com/80/v2-19959b8bbd05a87b5a8ae079a3039e15.png" alt="Image"></p>
<ul>
<li>cpu是人的大脑，负责控制全身和运算</li>
<li>内存是人的记忆，负责临时存储</li>
<li>硬盘是人的笔记本，负责永久存储</li>
<li>输入设备是耳朵或眼睛或嘴巴，负责接收外部的信息存入内存</li>
<li>输出设备是你的脸部(表情)或者屁股，负责经过处理后输出的结果</li>
<li>以上所有的设备都通过总线连接，总线相当于人的神经</li>
</ul>
<p>上课开始，老师讲课，学生听课，老师是程序员，学生是计算机，学生的器官都是计算机各部分组成</p>
<p>1.你通过耳朵接收老师讲的知识-&gt;输入</p>
<p>2.通过自己的神经，将接收的数据存入自己的内存/短期记忆（总线、内存）</p>
<p>3.光听不行，你还需要反应/处理老师讲的知识，于是你的大脑/cpu从短期记忆里取出知识/指令，分析知识/指令，然后学习知识/执行指令 （cpu取指、分析、执行）</p>
<p>4.你通过作业或者说话输出你学到的结果</p>
<p>5.你想要永久将知识保存下来，只能拿出一个笔记本，把刚刚学会的知识都写到本子上，这个本子就是硬盘（磁盘）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101322276.svg" alt></p>
<hr>
<h2 id="处理器">处理器</h2>
<p>通常将运算器和控制器合称为中央处理器(Central Processing Unit，CPU)。其中运算器用来主要负责程序运算与逻辑判断，控制器则主要协调各组件和各单元的工作，所以CPU的工作主要在于管理和运算。可以说计算机的大脑就是CPU，它从内存中<strong>取指令-&gt;解码-&gt;执行</strong>，然后再<strong>取指-&gt;解码-&gt;执行下一条指令</strong>，周而复始，直至整个程序被执行完成。</p>
<p>既然CPU的重点在于进行运算和判断，那么要被运算与判断的数据是从哪里来的？CPU读取的数据都是从<strong>主存储器(内存)</strong> 来的！主存储器内的数据则是从输入单元所传输进来！而CPU处理完毕的数据也必须先写回主存储器中，最后数据才从主存储器传输到输出单元。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic4.zhimg.com/80/v2-e3a156be62bbbc56516616a703836f7a.png" alt="Image"></p>
<p>在超大规模集成电路构成的微型计算机中，往往将CPU制成一块具有特定功能的芯片，称为微处理器，芯片里边有编写好的微指令集,我们在主机上的所有操作或者说任何软件的执行最终都要转化成cpu的指令去执行,如输入输出，阅读，视频，上网等这些都要参考CPU是否内置有相关微指令集才行。如果没有那么CPU无法处理这些操作。不同的CPU指令集不同对应的功能也不同，这就好比不同的人脑，对于大多数人类来说，人脑的结构一样，但是大家的智商都有差别。</p>
<h3 id="CPU历史">CPU历史</h3>
<p>微处理器由一片或少数几片大规模集成电路组成的中央处理器。这些电路执行控制部件和算术逻辑部件的功能。微处理器能完成取指令、执行指令，以及与外界存储器和逻辑部件交换信息等操作，是微型计算机的运算控制部分。它可与存储器和外围电路芯片组成微型计算机。</p>
<p>计算机的发展主要表现在其核心部件——微处理器的发展上，每当一款新型的微处理器出现时，就会带动计算机系统的其他部件的相应发展，如计算机体系结构的进一步优化，存储器存取容量的不断增大、存取速度的不断提高，外围设备的不断改进以及新设备的不断出现等。根据微处理器的字长和功能，可将其发展划分为以下几个阶段。</p>
<ul>
<li>第1阶段（1971——1973年）是4位和8位低档微处理器时代，通常称为第1代。</li>
<li>第2阶段（1974——1977年）是8位中高档微处理器时代，通常称为第2代。</li>
<li>第3阶段（1978——1984年）是16位微处理器时代，通常称为第3代。</li>
<li>第4阶段（1985——1992年）是32位微处理器时代，又称为第4代。</li>
<li>第5阶段（1993-2005年）是奔腾（pentium）系列微处理器时代，通常称为第5代。</li>
<li>第6阶段（2005年至今）是酷睿（core）系列微处理器时代，通常称为第6代。“酷睿”是一款领先节能的新型微架构，设计的出发点是提供卓然出众的性能和能效，提高每瓦特性能，也就是所谓的能效比。处理器逐渐向更多核心，更高并行度发展。典型的代表有英特尔的酷睿系列处理器和AMD的锐龙系列处理器。</li>
</ul>
<blockquote>
<p>若想具体了解CPU历史参见百度百科：<br>
<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8/284033?fr=aladdin&amp;fromid=368184&amp;fromtitle=%EF%BC%A3%EF%BC%B0%EF%BC%B5#10">https://baike.baidu.com/item/中央处理器/284033?fr=aladdin&amp;fromid=368184&amp;fromtitle=ＣＰＵ#10</a></p>
</blockquote>
<h3 id="CPU的分类与指令集">CPU的分类与指令集</h3>
<h4 id="CPU指令集权限">CPU指令集权限</h4>
<p>在说用户态与内核态之前，有必要说一下CPU指令集，指令集是CPU实现软件指挥硬件执行的媒介，具体来说每一条汇编语句都对应了一条CPU指令，而非常非常多的 CPU指令在一起，可以组成一个、甚至多个集合，指令的集合叫CPU指令集。</p>
<p>同时为避免指令操作不规范而导致对计算机系统造成损坏，<code>CPU指令集</code>设置了权限分级。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092257764.webp" alt></p>
<p>以 InterCPU为例，Inter把<code>CPU指令集</code>操作的权限由高到低划为4级：</p>
<ul>
<li>ring 0</li>
<li>ring 1</li>
<li>ring 2</li>
<li>ring 3</li>
</ul>
<p>其中 <code>ring 0</code>权限最高，可以使用所有<code>CPU指令集</code>，<code>ring 3</code> 权限最低，仅能使用常规 CPU指令集，不能使用操作硬件资源的 CPU指令集，比如 IO读写、网卡访问、申请内存都不行，Linux系统仅采用ring 0 和 ring 3 这2个权限。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092257045.webp" alt></p>
<p>高情商</p>
<ul>
<li>ring 0被叫做内核态，完全在操作系统内核中运行，由专门的 <strong>内核线程</strong> 在 CPU 中执行其任务</li>
<li>ring 3被叫做用户态，在应用程序中运行，由 <strong>用户线程</strong> 在 CPU 中执行其任务</li>
</ul>
<p>低情商</p>
<ul>
<li>执行内核空间的代码，具有ring 0保护级别，有对硬件的所有操作权限，可以执行所有C P U 指令集，访问任意地址的内存，在内核模式下的任何异常都是灾难性的，将会导致整台机器停机</li>
<li>在用户模式下，具有ring 3保护级别，代码没有对硬件的直接控制权限，也不能直接访问地址的内存，程序是通过调用系统接口(System Call APIs)来达到访问硬件和内存，在这种保护模式下，即时程序发生崩溃也是可以恢复的，在电脑上大部分程序都是在，用户模式下运行的</li>
</ul>
<p>我们已经知道CPU内部是含有微指令集的，我们所使用的的软件都要经过CPU内部的微指令集来完成才行。这些指令集的设计主要又被分为两种设计理念，这就是目前世界上常见到的两种主要的CPU种类：分别是精简指令集（RISC）与复杂指令集（CISC）系统。下面我们就来谈谈这两种不同CPU种类的差异！</p>
<h4 id="精简指令集">精简指令集</h4>
<p><strong>精简指令集</strong>（Reduced Instruction Set Computing，<strong>RISC</strong>）：这种CPU的设计中，微指令集较为精简，每个指令的运行时间都很短，完成的动作也很单纯，指令的执行效能较佳；但是若要做复杂的事情，就要由多个指令来完成。常见的RISC指令集CPU主要例如Sun公司的SPARC系列、IBM公司的Power Architecture（包括PowerPC）系列、与ARM系列等。【注：Sun已经被Oracle收购；】</p>
<ul>
<li><strong>SPARC架构</strong>的计算机常用于学术领域的大型工作站中，包括银行金融体系的主服务器也都有这类的计算机架构；</li>
<li><strong>PowerPC架构</strong>的应用，如Sony出产的Play Station 3（PS3）使用的就是该架构的Cell处理器。</li>
<li><strong>ARM</strong>是世界上使用范围最广的CPU了，常用的各厂商的手机、PDA、导航系统、网络设备等，几乎都用该架构的CPU。</li>
</ul>
<h4 id="复杂指令集">复杂指令集</h4>
<p><strong>复杂指令集</strong>（Complex Instruction Set Computer，<strong>CISC</strong>）与RISC不同，在CISC的微指令集中，每个小指令可以执行一些较低阶的硬件操作，指令数目多而且复杂，每条指令的长度并不相同。因此指令执行较为复杂所以每条指令花费的时间较长，但每条个别指令可以处理的工作较为丰富。常见的CISC微指令集CPU主要有AMD、Intel、VIA等的<strong>x86架构</strong>的CPU。</p>
<p>一般认为：<strong>CPU 硬件直接支持的数学计算公式执行效率最高</strong>。就是因为 CPU 指令集中包含这个数学公式，数学计算只需要一条指令就可以执行完毕。反之就需要通过多条 CPU 指令以组合的方式完成数学计算，需要执行多条 CPU 指令，在空间和时间复杂度上都会复杂 N 倍。所以请大家理解 CPU 执行效率高低的来源，当然指令集只是制约 CPU 执行效率高低的其中一个因素，但是该因素绝对是重量级的、起决定性的因素</p>
<h4 id="总结：">总结：</h4>
<p>CPU按照指令集可以分为精简指令集CPU和复杂指令集CPU两种，区别在于前者的指令集精简，每个指令的运行时间都很短，完成的动作也很单纯，指令的执行效能较佳；但是若要做复杂的事情，就要由多个指令来完成。后者的指令集每个小指令可以执行一些较低阶的硬件操作，指令数目多而且复杂，每条指令的长度并不相同。因为指令执行较为复杂所以每条指令花费的时间较长，但每条个别指令可以处理的工作较为丰富。</p>
<h3 id="x86结构以及64位">x86结构以及64位</h3>
<h4 id="x86架构">x86架构</h4>
<p>x86是针对cpu的型号或者说架构的一种统称，详细地讲，最早的那颗Intel发明出来的CPU代号称为8086，后来在8086的基础上又开发出了80285、80386…，因此这种架构的CPU就被统称为x86架构了。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092044823.webp" alt></p>
<p>由于AMD、Intel、VIA所开发出来的x86架构CPU被大量使用于个人计算机上面，因此，个人计算机常被称为x86架构的计算机！</p>
<p>程序员开发出的软件最终都要翻译成cpu的指令集才能运行，因此软件的版本必须与cpu的架构契合，举个例子，我们在MySQL官网下载软件MySQL时名字为：</p>
<blockquote>
<p>Windows(x86,32-bit),ZIP Archive<br>
(mysql-5.7.20-win32.zip)</p>
</blockquote>
<p>我们发现名字中有x86，这其实就是告诉我们：该软件应该运行在x86架构的计算机上。</p>
<h4 id="64位">64位</h4>
<p>cpu的位数指的是cpu一次性能从内存中取出多少位二进制指令，64bit指的是一次性能从内存中取出64位二进制指令。</p>
<p>在2003年以前由Intel所开发的x86架构CPU由8位升级到16、32位，后来AMD依此架构修改新一代的CPU为64位，到现在，个人计算机CPU通常都是x86_64的架构。</p>
<p>cpu具有向下兼容性，指的是64位的cpu既可以运行64位的软件，也可以运行32位的软件，而32位的cpu只能运行32位的软件。这其实很好理解，如果把cpu的位数当成是车道的宽，而内存中软件的指令当做是待通行的车辆，宽64的车道每次肯定既可以通行64辆车，也可以通信32辆车，而宽32的车道每次却只能通行32辆车</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092039097.webp" alt></p>
<h3 id="运算器和控制器">运算器和控制器</h3>
<p>常将运算器和控制器合称为中央处理器(Central Processing Unit，CPU)。</p>
<p>其中运算器用来主要负责程序运算与逻辑判断，控制器则主要协调各组件和各单元的工作，所以CPU的工作主要在于管理和运算。可以说计算机的大脑就是CPU</p>
<h4 id="运算器">运算器</h4>
<p>运算器是对信息进行处理和运算的部件。经常进行的运算是算术运算和逻辑运算，所以运算器又可称为算术逻辑运算部件（Arithmetic and Logical，ALU）。</p>
<p>运算器的核心是加法器。运算器中还有若干个通用寄存器或累加寄存器，用来暂存操作数并存放运算结果。寄存器的存取速度比存储器的存放速度快很多。</p>
<h4 id="控制器">控制器</h4>
<p>控制器是整个计算机的指挥中心，它的主要功能是按照人们预先确定的操作步骤，控制整个计算机的各部件有条不紊的自动工作。</p>
<p>控制器从主存中逐条地读取出指令进行分析，根据指令的不同来安排操作顺序，向各部件发出相应的操作信号，控制它们执行指令所规定的任务。控制器中包括一些专用的寄存器。</p>
<h3 id="寄存器">寄存器</h3>
<p>因访问内存以得到指令或数据的时间比cpu执行指令花费的时间要长得多，所以，所有CPU内部都有一些用来保存关键变量和临时数据的寄存器，这样通常在cpu的指令集中专门提供一些指令，用来将一个字（可以理解为数据）从内存调入寄存器，以及将一个字从寄存器存入内存。cpu其他的指令集可以把来自寄存器、内存的操作数据组合，或者用两者产生一个结果，比如将两个字相加并把结果存在寄存器或内存中。</p>
<h4 id="分类">分类</h4>
<ol>
<li>除了用来保存变量和临时结果的通用寄存器外</li>
<li>多数计算机还有一些对程序员课件的专门寄存器，其中之一便是程序计数器，它保存了将要取出的下一条指令的内存地址。在指令取出后，程序计算器就被更新以便执行后期的指令</li>
<li>另外一个寄存器便是堆栈指针，它指向内存中当前栈的顶端。该栈包含已经进入但是还没有退出的每个过程中的一个框架。在一个过程的堆栈框架中保存了有关的输入参数、局部变量以及那些没有保存在寄存器中的临时变量</li>
<li>最后 一个非常重要的寄存器就是程序状态字寄存器(Program Status Word,PSW),这个寄存器包含了条码位(由比较指令设置)、CPU优先级、模式（用户态或内核态），以及各种其他控制位。用户通常读入整个PSW，但是只对其中少量的字段写入。在系统调用和I/O中，PSW非常非常非常非常非常非常重要</li>
</ol>
<h4 id="维护">维护</h4>
<p>操作系统必须知晓所有的寄存器。在时间多路复用的CPU中，操作系统会经常中止正在运行的某个程序并启动（或再次启动）另一个程序。每次停止一个运行着的程序时，操作系统必须保存所有的寄存器，这样在稍后该程序被再次运行时，可以把这些寄存器重新装入。</p>
<h3 id="处理器设计的演变">处理器设计的演变</h3>
<ol>
<li>
<p>最开始取值、解码、执行这三个过程是同时进行的，这意味着任何一个过程完成都需要等待其余两个过程执行完毕，时间浪费</p>
</li>
<li>
<p>后来被设计成了流水线式的设计，即执行指令n时，可以对指令n+1解码，并且可以读取指令n+2,完全是一套流水线。</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092148828.webp" alt></p>
<ol start="3">
<li>超变量cpu，比流水线更加先进，有多个执行单元，可以同时负责不同的事情，比如看片的同时，听歌，打游戏。</li>
</ol>
<p>两个或更多的指令被同时取出、解码并装入一个保持缓冲区中，直至它们都执行完毕。只有有一个执行单元空闲，就检查保持缓冲区是否还有可处理的指令</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092148824.webp" alt></p>
<p>这种设计存在一种缺陷，即程序的指令经常不按照顺序执行，在多数情况下，硬件负责保证这种运算结果与顺序执行的指令时的结果相同。</p>
<h3 id="内核态与用户态">内核态与用户态</h3>
<blockquote>
<p>张三是某科技公司的初级Java开发工程师（低权限），目前在15楼办公码代码，公司提供的资源仅有一套电脑（用户态），张三想着这一线的房价，倍感压力山大，于是给自己定下一个目标，一定要做技术总监，在一线扎根， 奋斗B张三，奋斗5年终于当上了技术总监（高权限），之后张三搬到30楼，可以随时向资源部（系统调用）申请公司各种资源与获取公司的机密信息（内核态），所谓是走上人生巅峰。</p>
<p>通过这个故事，我们发现，低权限的资源范围较小，高权限的资源范围更大，所谓的「<strong>用户态与内核态只是不同权限的资源范围</strong>」。</p>
</blockquote>
<p>通关了CPU指令集权限，现在再说用户态与内核态就十分简单了，用户态与内核态的概念就是CPU指令集权限的区别，进程中要读写 I O，必然会用到 ring 0 级别的 CPU指令集，而此时 CPU 的指令集操作权限只有 ring 3，为了可以操作ring 0级别的CPU指令集， CPU切换指令集操作权限级别为 ring 0，CPU再执行相应的ring 0 级别的 CPU 指令集（内核代码），执行的内核代码会使用当前进程的内核栈。</p>
<blockquote>
<p>PS：每个进程都有两个栈，分别是用户栈与内核栈，对应用户态与内核态的使用</p>
</blockquote>
<p>除了在嵌入式系统中的非常简单的CPU之外，多数CPU都有两种模式，即内核态与用户态。</p>
<p>通常，PSW中有一个二进制位控制这两种模式。</p>
<ul>
<li>
<p>内核态：当cpu在内核态运行时，cpu可以执行指令集中所有的指令，很明显，所有的指令中包含了使用硬件的所有功能，（操作系统在内核态下运行，从而可以访问整个硬件）</p>
</li>
<li>
<p>用户态：用户程序在用户态下运行，仅仅只能执行cpu整个指令集的一个子集，该子集中不包含操作硬件功能的部分，因此，一般情况下，在用户态中有关I/O和内存保护（操作系统占用的内存是受保护的，不能被别的程序占用），当然，在用户态下，将PSW中的模式设置成内核态也是禁止的。</p>
</li>
</ul>
<h4 id="用户态与内核态的空间">用户态与内核态的空间</h4>
<p>在内存资源上的使用，操作系统对用户态与内核态也做了限制，每个进程创建都会分配<code>「虚拟空间地址」</code>，以Linux32位操作系统为例，它的寻址空间范围是 4G（2的32次方），而操作系统会把虚拟控制地址划分为两部分，一部分为<strong>内核空间</strong>，另一部分为<strong>用户空间</strong>，高位的 1G（从虚拟地址 0xC0000000 到 0xFFFFFFFF）由内核使用，而低位的 3G（从虚拟地址 0x00000000 到 0xBFFFFFFF）由各个进程使用。</p>
<ul>
<li>用户态：只能操作 0-3G 范围的低位虚拟空间地址</li>
<li>内核态：0-4G 范围的虚拟空间地址都可以操作，尤其是对 3-4G 范围的高位虚拟空间地址必须由内核态去操作</li>
<li>补充：3G-4G 部分大家是<strong>共享</strong>的（指所有进程的内核态逻辑地址是共享同一块内存地址），是内核态的地址空间，这里存放在整个内核的代码和所有的内核模块，以及内核所维护的数据</li>
</ul>
<p>每个进程的 4G 虚拟空间地址，高位 1G 都是一样的，即内核空间。只有剩余的 3G 才归进程自己使用，换句话说就是， 高位 1G 的内核空间是被所有进程共享的！</p>
<p>最后做个小结，<strong>我们通过指令集权限区分用户态和内核态，还限制了内存资源的使用，操作系统为用户态与内核态划分了两块内存空间，给它们对应的指令集使用</strong></p>
<h4 id="内核态与用户态切换">内核态与用户态切换</h4>
<p>用户态下工作的软件不能操作硬件，但是我们的软件比如暴风影音，一定会有操作硬件的需求，比如从磁盘上读一个电影文件，那就必须经历从用户态切换到内核态的过程，为此，用户程序必须使用系统调用（system call），系统调用陷入内核并调用操作系统，TRAP指令把用户态切换成内核态，并启用操作系统从而获得服务。</p>
<p>请把的系统调用看成一个特别的的过程调用指令就可以了，该指令具有从用户态切换到内核态的特别能力。</p>
<p>相信大家都听过这样的话「用户态和内核态切换的开销大」，但是它的开销大在那里呢？简单点来说有下面几点</p>
<ul>
<li>保留用户态现场（上下文、寄存器、用户栈等）</li>
<li>复制用户态参数，用户栈切到内核栈，进入内核态</li>
<li>额外的检查（因为内核代码对用户不信任）</li>
<li>执行内核态代码</li>
<li>复制内核态代码执行结果，回到用户态</li>
<li>恢复用户态现场（上下文、寄存器、用户栈等）</li>
<li>实际上操作系统会比上述的更复杂，这里只是个大概，我们可以发现一次切换经历了「用户态 -&gt; 内核态 -&gt; 用户态」。</li>
</ul>
<p>用户态要主动切换到内核态，那必须要有入口才行，实际上内核态是提供了统一的入口，下面是Linux整体架构图</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092312796.webp" alt></p>
<p>从上图我们可以看出来通过系统调用将Linux整个体系分为用户态和内核态，为了使应用程序访问到内核的资源，如CPU、内存、I/O，内核必须提供一组通用的访问接口，这些接口就叫<strong>系统调用</strong>。</p>
<p><strong>库函数</strong>就是屏蔽这些复杂的底层实现细节，减轻程序员的负担，从而更加关注上层的逻辑实现，它对系统调用进行封装，提供简单的基本接口给程序员。</p>
<p><strong>Shell</strong>顾名思义，就是外壳的意思，就好像把内核包裹起来的外壳，它是一种特殊的应用程序，俗称命令行。Shell也是可编程的，它有标准的Shell 语法，符合其语法的文本叫Shell脚本，很多人都会用Shell脚本实现一些常用的功能，可以提高工作效率。</p>
<p>最后来说说，什么情况会导致用户态到内核态切换</p>
<ul>
<li><strong>系统调用</strong>：用户态进程主动切换到内核态的方式，用户态进程通过系统调用向操作系统申请资源完成工作，例如 <code>fork()</code>就是一个创建新进程的系统调用，系统调用的机制核心使用了操作系统为用户特别开放的一个中断来实现，如Linux 的 int 80h 中断，也可以称为软中断</li>
<li><strong>异常</strong>：当 CPU 在执行用户态的进程时，发生了一些没有预知的异常，这时当前运行进程会切换到处理此异常的内核相关进程中，也就是切换到了内核态，如缺页异常</li>
<li><strong>中断</strong>：当 CPU 在执行用户态的进程时，外围设备完成用户请求的操作后，会向 CPU 发出相应的中断信号，这时 CPU 会暂停执行下一条即将要执行的指令，转到与中断信号对应的处理程序去执行，也就是切换到了内核态。如硬盘读写操作完成，系统会切换到硬盘读写的中断处理程序中执行后边的操作等。</li>
</ul>
<h3 id="多线程和多核芯片">多线程和多核芯片</h3>
<p>moore定律指出，芯片中的晶体管数量每18个月翻一倍，随着晶体管数量的增多，更强大的功能成为了可能，如</p>
<ul>
<li>第一步增强：在cpu芯片中加入更大的<strong>缓存</strong>，一级缓存L1，用和cpu相同的材质制成，cpu访问它没有时延</li>
<li>第二步增强：一个cpu中的<strong>处理逻辑</strong>增多，intel公司首次提出，称为多线程（multithreading）或超线程（hyperthreading），对用户来说一个有两个线程的cpu就相当于两个cpu，我们后面要学习的进程和线程的知识就起源于这里，==进程是资源单位而线程才是cpu的执行单位==。</li>
</ul>
<blockquote>
<p>多线程运行cpu保持两个不同的线程状态，可以在纳秒级的时间内来回切换，速度快到你看到的结果是并发的，伪并行的，然而多线程不提供真正的并行处理，一个cpu同一时刻只能处理一个进程（一个进程中至少一个线程）</p>
</blockquote>
<ul>
<li>第三步增强：除了多线程，还出现了傲寒2个或者4个完整处理器的cpu芯片，如下图。要使用这类多核芯片肯定需要有多处理操作系统</li>
</ul>
<center class="half">
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092322429.webp" width="200"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092323738.webp" width="200">
</center>
<h4 id="进程">进程</h4>
<p>面试都会问什么是进程，什么是线程吧，一般我们对进程的回答是：<code>系统调度资源的最小或基本单位</code>，怎么理解呢</p>
<p>系统内核中 <strong>进程</strong> 就是：<code>一段记录专有资源和状态的 task_struct 结构体</code>，就是一个数据结构或者理解为一个存储资源信息的对象，<code>task_struct 结构体</code>其存储的信息就是这些：</p>
<ul>
<li><strong>标识符</strong>: 与进程相关的唯一标识符,用来区别正在执行的进程和其他进程。</li>
<li><strong>状态</strong>: 描述进程的状态，因为进程有挂起,阻塞，运行等好几个状态，所以都有个标识符来记录进程的执行状态</li>
<li><strong>优先级</strong>: 如果有好几个进程正在执行，就涉及到进程被执行的先后顺序的问题，这和进程优先级这个标识符有关</li>
<li><strong>程序计数器</strong>: 程序中即将被执行的下一条指令的地址。</li>
<li><strong>内存指针</strong>: 程序代码和进程相关数据的指针。</li>
<li><strong>上下文数据</strong>: 进程执行时处理器的寄存器中的数据。</li>
<li><strong>IO状态信息</strong>: 包括显示的I/O请求，分配给进程的IO设备和被进程使用的文件费宇@极致Linux内核·记账信息:包括处理器的时间总和,记账号等等。</li>
</ul>
<blockquote>
<p>对于 结构体 不理解请看 C 语言语法，很简单，就是 java 中的对象，只不过 结构体 内部只有属性没有方法</p>
</blockquote>
<p>这个 <code>task_struct</code> 结构体有个专门的名字：<code>PCB</code> --&gt; <code>PROCESS control block</code>，也叫<strong>进程控制块</strong>，PCB 数据保存在 进程4G内存虚拟地址中的内核态中，也就是 3-4G 内存这一段内，显然用户态时是无法访问的，想要访问就必须从用户态切换到内核态，而且这么核心的数据直接暴露给用户程序也是很危险的</p>
<p>进程在内核中就是这么个东西，就是一个叫 PCB 的 <code>task_struct</code> 结构体，系统内核中有一个 <code>PCB TABLE</code> 用来存储、调度进程</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101330346.png" alt></p>
<h4 id="线程">线程</h4>
<p>线程在内核中同 进程 一样，也是一个 <code>task_struct</code> 结构体，线程在 new 出来之后就是把 进程的 PCB 复制一份给自己，然后加上 PCB 没有的 <code>PC程序计数器，SP堆栈，State状态，寄存器</code> 这些信息。线程的 task_struct 结构体 叫做：<code>TCB</code> --&gt; <code>thread control block</code>。<strong>线程本质上就是多了一个任务列表</strong>，就是 <code>栈帧</code> 这个东西</p>
<p>大家想 线程为什么能共享堆内存资源呢，怎么做到的呢，真的很简单，把 进程资源信息 PCB 复制一份给 自己的 TCB 就行了，所以这里大家体会下</p>
<blockquote>
<p>换个角度理解进程、线程</p>
<ul>
<li><strong>进程</strong> --&gt; 是向系统内核申请资源的最小、基本单位</li>
<li><strong>线程</strong> --&gt; 是竞争 CPU 资源的最小、基本单位</li>
</ul>
</blockquote>
<center> 
<p>==<code>进程</code> 申请的是内存资源，<code>线程</code> 竞争的是 CPU 资源==</p>
</center>
<h5 id="内核线程">内核线程</h5>
<p>线程分：<code>内核线程</code>、<code>用户线程</code>，内核线程的 TCB 和 进程 的 PCB 保存在一个位置，都是在 3-4G 的内核地址内存中。系统内核中调度的是 内核线程，不是用户线程</p>
<p>内核线程一样有自己的栈帧，所有ring0的代码都淂切换到 内核线程 来执行</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101359868.webp" alt></p>
<h5 id="用户线程">用户线程</h5>
<p>有了内核线程，为什么还得设计用户线程呢，不用想就是为了和 <code>ring 0</code>,<code>ring 3</code> 指令权限对应，为的就是权限责任分明。系统内核操作、硬件操作、安全权限高的代码必须得在内核中执行，用户不能碰，用户自己的低权限代码在用户自己的线程中执行就好了，这样设计代码分层，扩展性能好，相互不影响</p>
<p>Linux 中默认采用 <code>1：1 线程模型</code>，就是有一个 用户线程，就得在内核中启动一个对应的 内核线程，然后把这个 用户线程 绑定到 内核线程 上。当然还有其他的对应方式，这就得依靠第三方实现方案了。C 标准函数库 PThread 线程函数库就是 1：1 线程模型，这点大家想想 Dart 中的线程为啥就能实现资源、内存隔离，肯定就是自己做出修改的</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101406744.webp" alt></p>
<p>需要说一下 java JVM 采用 Linux 默认函数库，也就是 PThread，1：1 线程模型。java new 一个 Thread 时，是创建了 1个用户线程和内核线程的，然后把用户线程绑定到内线线程中，ring3 的代码在 用户线程中执行，ring0 的代码切换到 内核线程 中去执行，然后使用 内核线程 接受 系统内核的调度，内核线程抢到 CPU 时间片后，用户线程就会激活执行代码</p>
<p>用户线程的 TCB 保存在 进程 0-3G 虚拟地址空间的堆内存中，对于 系统内核 来说是不可见的，所以线程的调度是由 内核线程 来承担、处理</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101415820.webp" alt></p>
<h5 id="用户线程和内核线程切换">用户线程和内核线程切换</h5>
<p>用户线程和内核线程的区别就是 <strong>TCB 位置的不同</strong>，<strong>执行的代码权限级别不同</strong>，然后<strong>内核线程会接受操作系统内核调度单元的调度指令</strong></p>
<p>那么对于 用户线程和内核线程的切换 怎么理解呢？大家就当做2个线程切换就好了，用户线程和内核线程都有自己的栈帧，寄存器值、CPU 加载的缓存 等属于自己线程的数据，用户线程到内核线程的切换一样会涉及这些 线程上下文 的切换，性能损失在这里</p>
<p>一般来说像 IO 操作这些都是淂在 内核线程 中去执行，所以 IO 代码就会涉及到 用户态到内核态的切换，其中性能损失就是线程上下文的切换，重点是 IO 操作会造成频繁的造成 用户态到内核态再到用户态 的切换。优化的重点是减少切换，所以 mmap 很重要。mmap 实现了不用借助 系统中断，不用到 内核态 执行系统函数，直接往硬盘中读写数据，少了用户态到内核态的切换，所以性能好，效率高</p>
<p>好了就这么多，这么理解就行了，不用想的太复杂，就是这么回事。用户态=用户线程，内核态=内核线程，2者的区别就是对内存操作的范围有区别，对指令的操作权限有区别</p>
<h2 id="存储器">存储器</h2>
<p>计算机中第二重要的就是存储了，所有人都意淫着存储：</p>
<p><strong>速度快（这样cpu的等待存储器的延迟就降低了）+容量大+价钱便宜</strong>。</p>
<p>同时兼备三者是不可能的，所以有了如下的不同的处理方式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101450948.webp" alt></p>
<p>存储器系统采用如上图的分层结构，顶层的存储器速度较高，容量较小，与底层的存储器相比每位的成本较高，其差别往往是十亿数量级的</p>
<h3 id="寄存器即L1缓存：">寄存器即L1缓存：</h3>
<p>用与cpu相同材质制造，与cpu一样快，因而cpu访问它无时延，典型容量是：在32位cpu中为32<em>32，在64位cpu中为64</em>64，在两种情况下容量均&lt;1KB。</p>
<h3 id="高速缓存即L2缓存：">高速缓存即L2缓存：</h3>
<p>主要由硬件控制高速缓存的存取，内存中有高速缓存行按照 0~64 字节为行0，64~127为行1。。。最常用的高速缓存行放置在cpu内部或者非常接近cpu的高速缓存中。当某个程序需要读一个存储字时，高速缓存硬件检查所需要的高速缓存行是否在高速缓存中。如果是，则称为<strong>高速缓存命中</strong>，缓存满足了请求，就不需要通过总线把访问请求送往主存(内存)，这毕竟是慢的。高速缓存的命中通常需要两个时钟周期。高速缓存为命中，就必须访问内存，这需要付出大量的时间代价。由于高速缓存价格昂贵，所以其大小有限，有些机器具有两级甚至三级高速缓存，每一级高速缓存比前一级慢但是容易大。</p>
<p>缓存在计算机科学的许多领域中起着重要的作用，并不仅仅只是RAM（随机存取存储器）的缓存行。只要存在大量的资源可以划分为小的部分，那么这些资源中的某些部分肯定会比其他部分更频发地得到使用，此时用缓存可以带来性能上的提升。一个典型的例子就是操作系统一直在使用缓存，比如，多数操作系统在内存中保留频繁使用的文件（的一部分），以避免从磁盘中重复地调用这些文件，类似的<code>/root/a/b/c/d/e/f/a.txt</code>的长路径名转换成该文件所在的磁盘地址的结果然后放入缓存，可以避免重复寻找地址，还有一个web页面的url地址转换为网络地址(IP)地址后，这个转换结果也可以缓存起来供将来使用。</p>
<p>缓存是一个好方法，在现代cpu中设计了两个缓存，再看4.1中的两种cpu设计图。第一级缓存称为L1总是在CPU中，通常用来将已经解码的指令调入cpu的执行引擎，对那些频繁使用的数据自，多少芯片还会按照第二L1缓存 。。。另外往往设计有二级缓存L2，用来存放近来经常使用的内存字。L1与L2的差别在于对cpu对L1的访问无时间延迟，而对L2的访问则有1-2个时钟周期（即1-2ns）的延迟。</p>
<center class="half">
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092322429.webp" width="200"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301092323738.webp" width="200">
</center>
<h3 id="内存：">内存：</h3>
<p>再往下一层是主存，此乃存储器系统的主力，主存通常称为<code>随机访问存储RAM</code>，就是我们通常所说的内存，容量一直在不断攀升，所有不能再高速缓存中找到的，都会到主存中找，主存是<strong>易失性存储</strong>，断电后数据全部消失</p>
<p>除了主存RAM之外，许多计算机已经在使用少量的<strong>非易失性随机访问存储</strong>如<code>ROM（Read Only Memory，ROM）</code>，在电源切断之后，非易失性存储的内容并不会丢失，ROM只读存储器在工厂中就被编程完毕，然后再也不能修改。ROM速度快且便宜，在有些计算机中，用于启动计算机的引导加载模块就存放在ROM中，另外一些I/O卡也采用ROM处理底层设备的控制。</p>
<p><code>EEPROM（Electrically Erasable PROM，电可擦除可编程ROM）</code>和闪存<code>（flash memory）</code>也是<strong>非易失性</strong>的，但是与ROM相反，他们可以擦除和重写。不过重写时花费的时间比写入RAM要多。在便携式电子设备中中，闪存通常作为存储媒介。闪存是数码相机中的胶卷，是便携式音译播放器的磁盘，还应用于固态硬盘。闪存在速度上介于RAM和磁盘之间，但与磁盘不同的是，闪存擦除的次数过多，就被磨损了。</p>
<p>还有一类存储器就是<code>CMOS</code>，它是<strong>易失性</strong>的，许多计算机利用CMOS存储器来保持当前时间和日期。CMOS存储器和递增时间的电路由一小块电池驱动，所以，即使计算机没有加电，时间也仍然可以正确地更新，除此之外CMOS还可以保存配置的参数，比如，哪一个是启动磁盘等，之所以采用CMOS是因为它耗电非常少，一块工厂原装电池往往能使用若干年，但是当电池失效时，相关的配置和时间等都将丢失</p>
<h2 id="磁盘">磁盘</h2>
<h3 id="原理">原理</h3>
<center class="half">
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101500127.webp" height="200"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101500855.webp" height="200">
</center>
<center class="half">
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101501918.webp" height="200"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101506112.webp" height="200">
</center>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101506298.webp" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301101507220.webp" alt></p>
<p>磁盘低速的原因是因为它一种机械装置，在磁盘中有一个或多个金属盘片，它们以5400，7200或10800rpm（RPM =revolutions per minute 每分钟多少转 ）的速度旋转。从边缘开始有一个机械臂悬在盘面上，这类似于老式黑胶唱片机上的拾音臂。信息卸载磁盘上的一些列的同心圆上，是一连串的2进制位（<strong>称为bit位</strong>），为了统计方法，8个bit称为一个字节bytes，1024bytes=1k，1024k=1M，1024M=1G,所以我们平时所说的磁盘容量最终指的就是磁盘能写多少个2进制位。</p>
<blockquote>
<p><strong>TB,PB, Eb, Zb, YB</strong><br>
1B= 8bit<br>
1KB=2(10)B=1024B； 括号中的数字为2的指数(即多少次方)<br>
1MB=2(10)KB=1024KB=2(20)B；<br>
1GB=2(10)MB=1024MB=2(30)B。<br>
1TB=2(10) GB=1024GB=2(40)B<br>
1PB=2(10) TB=1024TB=2(50)B<br>
1EB=2(10) PB=1024PB=2(60)B<br>
1ZB=2(10) EB=1024EB=2(70)B<br>
1YB=2(10) ZB=1024ZB=2(80)B</p>
<p><strong>1Byte相当于一个英文字母</strong><br>
Kilobyte(KB)=1024B相当於一则短篇故事的内容。<br>
Megabyte(MB)=l024KB相当於一则短篇小说的文字内容。<br>
Gigabyte(GB)=1024MB相当於贝多芬第五乐章交响曲的乐谱内容。<br>
Terabyte(TB)=1024GB相当於一家大型医院中所有的X光图片资讯量。<br>
Petabyte(PB)=l024TB相当於50%的全美学术研究图书馆藏书资讯内容。<br>
Exabyte (EB)=1024PB；5EB相当於至今全世界人类所讲过的话语。<br>
Zettabyte(ZB)=1024EB如同全世界海滩上的沙子数量总和。<br>
Yottabyte(YB)=1024ZB相当於7000位人类体内的微细胞总和。</p>
</blockquote>
<p>每个磁头可以读取一段换新区域，称为磁道</p>
<p>把一个戈丁手臂位置上所以的磁道合起来，组成一个柱面</p>
<p>每个磁道划成若干扇区，扇区典型的值是512字节</p>
<p>数据都存放于一段一段的<strong>扇区</strong>，即磁道这个圆圈的一小段圆圈，从磁盘读取一段数据需要经历寻道时间和延迟时间</p>
<h3 id="平均寻道时间">平均寻道时间</h3>
<p>机械手臂从一个柱面随机移动到相邻的柱面的时间成为寻到时间，找到了磁道就以为着招到了数据所在的那个圈圈，但是还不知道数据具体这个圆圈的具体位置</p>
<h3 id="平均延迟时间">平均延迟时间</h3>
<p>机械臂到达正确的磁道之后还必须等待旋转到数据所在的扇区下，这段时间成为延迟时间</p>
<h3 id="虚拟内存：">虚拟内存：</h3>
<p>许多计算机支持虚拟内存机制，该机制使计算机可以运行大于物理内存的程序，方法是将正在使用的程序放入内存取执行，而暂时不需要执行的程序放到磁盘的某块地方，这块地方成为虚拟内存，在linux中成为swap，这种机制的核心在于快速地映射内存地址，由cpu中的一个部件负责，成为存储器管理单元(Memory Management Unit MMU)</p>
<blockquote>
<p>PS：从一个程序切换到另外一个程序，成为上下文切换(context switch),缓存和MMU的出现提升了系统的性能，尤其是上下文切换</p>
</blockquote>
<h2 id="磁带">磁带</h2>
<p>在价钱相同的情况下比硬盘拥有更高的存储容量，虽然速度低于磁盘，但是因其大容量，在地震水灾火灾时可移动性强等特性，常被用来做备份。（常见于大型数据库系统中）</p>
<h2 id="I-O设备（输入输出设备）">I/O设备（输入输出设备）</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301111633131.webp" alt></p>
<p>cpu和存储器并不是操作系统唯一需要管理的资源，I/O设备也是非常重要的一环。</p>
<p>见四中的图，I/O设备一般包括两个部分：<strong>设备控制器</strong>和<strong>设备本身</strong>。</p>
<ul>
<li>
<p>控制器：是查找主板上的一块芯片或一组芯片（硬盘，网卡，声卡等都需要插到一个口上，这个口连的便是控制器），控制器负责控制连接的设备，它从操作系统接收命令，比如读硬盘数据，然后就对硬盘设备发起读请求来读出内容。</p>
</li>
<li>
<p>控制器的功能：通常情况下对设备的控制是非常复杂和具体的，控制器的任务就是为操作系统屏蔽这些复杂而具体的工作，提供给操作系统一个简单而清晰的接口</p>
</li>
<li>
<p>设备本身：有相对简单的接口且标准的，这样大家都可以为其编写驱动程序了。要想调用设备，必须根据该接口编写复杂而具体的程序，于是有了控制器提供设备驱动接口给操作系统。必须把设备驱动程序安装到操作系统中。</p>
</li>
</ul>
<h3 id="输入设备">输入设备</h3>
<p>输入设备的任务是把人们编好的程序和原始数据送到计算机中去，并且将他们转换成计算机内存所能识别和接受的信息方式。</p>
<p>安输入信息的形态可分为字符（包括汉字）输入、图形输入、图像输入及语言输入等。目前，常见的输入设备有：键盘、鼠标、扫描仪等。辅助存储器（磁盘、磁带）也可以看作输入设备。另外，自动控制和检测系统中使用的模数（A/D）转换装置也是一种输入设备。</p>
<h3 id="输出设备">输出设备</h3>
<p>输出设备的任务是将计算机的处理结果以人或其他设备所能接受的形式送出计算机。</p>
<p>目前最常用的输出设备是打印机和显示器。辅助存储器也可以看做输出设备。另外，数模（D/A）转换装置也是一种输出设备。</p>
<h2 id="总线">总线</h2>
<p>四小节中的结构在小型计算机中沿用了多年，并也用在早期的IBM PC中。但是随着处理器和存储器速度越来越快，单总线很难处理总线的交通流量了，于是出现了下图的多总线模式，他们处理I/O设备及cpu到存储器的速度都更快。</p>
<ul>
<li>
<p>北桥即PCI桥<code>图形与内存控制器</code>：连接高速设备，负责CPU与内存的数据交换、图形处理、CPU与PCIE数据交换</p>
</li>
<li>
<p>南桥即ISA桥<code>输入/输出控制器</code>：连接慢速设备，负责系统的输入输出功能</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301111646651.webp" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301111628147.webp" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301111628452.webp" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301111629598.webp" alt></p>
<div class="note info flat"><p>现在的CPU制造工艺越来越先进，集成度越来越高，内存控制器已被集成到CPU里，就连显卡也被收进CPU了（就是我们所说的核显），而PCIE控制器收归南桥管理了，因此北桥芯片组的功能被瓜分了，所以现在的Intel芯片组把北桥取消掉只剩南桥了，而AMD也只有早期的主板还保留着北桥和南桥。</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301111643295.webp" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301111644863.webp" alt></p>
<h2 id="启动计算机">启动计算机</h2>
<p>在计算机的主板上有一个基本的输入输出程序(Basic  Input Output system)</p>
<p>BIOS就相当于一个小的操作系统，它有底层的I/O软件，包括读键盘，写屏幕，进行磁盘I/O,该程序存放于一非易失性闪存RAM中。</p>
<p>启动流程</p>
<ol>
<li>
<p>计算机加电</p>
</li>
<li>
<p>BIOS开始运行，检测硬件：cpu、内存、硬盘等</p>
</li>
<li>
<p>BIOS读取CMOS存储器中的参数，选择启动设备</p>
</li>
<li>
<p>从启动设备上读取第一个扇区的内容（MBR主引导记录512字节，前446为引导信息，后64为分区信息，最后两个为标志位）</p>
</li>
<li>
<p>根据分区信息读入bootloader启动装载模块，启动操作系统</p>
</li>
<li>
<p>然后操作系统询问BIOS，以获得配置信息。对于每种设备，系统会检查其设备驱动程序是否存在，如果没有，系统则会要求用户按照设备驱动程序。一旦有了全部的设备驱动程序，操作系统就将它们调入内核。然后初始有关的表格（如进程表），穿件需要的进程，并在每个终端上启动登录程序或GUI</p>
</li>
</ol>
<p>引用列表</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/linhaifeng/p/6523843.html">https://www.cnblogs.com/linhaifeng/p/6523843.html</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43914604/article/details/106136127">https://blog.csdn.net/weixin_43914604/article/details/106136127</a></li>
<li><a target="_blank" rel="noopener" href="https://www.pc-daily.com/jichu/62355.html">https://www.pc-daily.com/jichu/62355.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/linhaifeng/category/939357.html">https://www.cnblogs.com/linhaifeng/category/939357.html</a></li>
</ol>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301242359645.webp" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301242359645.webp" title="头像" alt="头像"></a><div class="post-copyright__author_name">林海峰</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__reprint" title="该文章为转载文章，注意版权协议" target="_blank" rel="noopener" href="https://www.cnblogs.com/linhaifeng/p/6523843.html">转载</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.cnblogs.com/linhaifeng/p/6523843.html')">计算机基础 | 2. 计算机硬件组成</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/mm_facetoface_collect_qrcode_1730547752845.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/mm_facetoface_collect_qrcode_1730547752845.webp" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/1730547802675.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/1730547802675.webp" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.cnblogs.com/linhaifeng/p/6523843.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=计算机基础 | 2. 计算机硬件组成&amp;url=https://www.cnblogs.com/linhaifeng/p/6523843.html&amp;pic=https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">转载</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%F0%9F%93%93%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>📓学习笔记<span class="tagsPageCount">43</span></a><a class="post-meta__box__tags" href="/tags/%F0%9F%96%A5%EF%B8%8F%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>🖥️计算机基础<span class="tagsPageCount">5</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202505142157033.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/a9cc61bb.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">计算机基础 | 1. 计算机硬件发展史</div></div></a></div><div class="next-post pull-right"><a href="/posts/728cd81a.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机基础 | 3. 操作系统</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/a9cc61bb.html" title="计算机基础 | 1. 计算机硬件发展史"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-01-06</div><div class="title">计算机基础 | 1. 计算机硬件发展史</div></div></a></div><div><a href="/posts/25150293.html" title="计算机基础 | 4. 网络协议"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-01-11</div><div class="title">计算机基础 | 4. 网络协议</div></div></a></div><div><a href="/posts/728cd81a.html" title="计算机基础 | 3. 操作系统"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-01-11</div><div class="title">计算机基础 | 3. 操作系统</div></div></a></div><div><a href="/posts/4fb638dd.html" title="计算机基础 | IP地址以及子网划分"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301082014777.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-01-14</div><div class="title">计算机基础 | IP地址以及子网划分</div></div></a></div><div><a href="/posts/e6868ecb.html" title="C++ | 奥赛一本通刷题笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202411071945448.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-12-17</div><div class="title">C++ | 奥赛一本通刷题笔记</div></div></a></div><div><a href="/posts/ad4f1e09.html" title="C++ | 核心知识及语法"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202411071937360.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-25</div><div class="title">C++ | 核心知识及语法</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" style="display: none">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202301242359645.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://emotion.acs.pw/emotion/QQ/154.gif" alt="status"/></div></div><div class="author-info__description">这是尖头叉子在霍格沃茨的休息室~</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Prong</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/37924260/" target="_blank" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS订阅"><i class="anzhiyufont anzhiyu-icon-rss"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">计算机硬件组成</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">1.1.</span> <span class="toc-text">处理器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CPU%E5%8E%86%E5%8F%B2"><span class="toc-number">1.1.1.</span> <span class="toc-text">CPU历史</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CPU%E7%9A%84%E5%88%86%E7%B1%BB%E4%B8%8E%E6%8C%87%E4%BB%A4%E9%9B%86"><span class="toc-number">1.1.2.</span> <span class="toc-text">CPU的分类与指令集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CPU%E6%8C%87%E4%BB%A4%E9%9B%86%E6%9D%83%E9%99%90"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">CPU指令集权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B2%BE%E7%AE%80%E6%8C%87%E4%BB%A4%E9%9B%86"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">精简指令集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E6%8C%87%E4%BB%A4%E9%9B%86"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">复杂指令集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-number">1.1.2.4.</span> <span class="toc-text">总结：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#x86%E7%BB%93%E6%9E%84%E4%BB%A5%E5%8F%8A64%E4%BD%8D"><span class="toc-number">1.1.3.</span> <span class="toc-text">x86结构以及64位</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#x86%E6%9E%B6%E6%9E%84"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">x86架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#64%E4%BD%8D"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">64位</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E5%99%A8%E5%92%8C%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">1.1.4.</span> <span class="toc-text">运算器和控制器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E5%99%A8"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">运算器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">控制器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">1.1.5.</span> <span class="toc-text">寄存器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">1.1.5.1.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%B4%E6%8A%A4"><span class="toc-number">1.1.5.2.</span> <span class="toc-text">维护</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%99%A8%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%BC%94%E5%8F%98"><span class="toc-number">1.1.6.</span> <span class="toc-text">处理器设计的演变</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E6%A0%B8%E6%80%81%E4%B8%8E%E7%94%A8%E6%88%B7%E6%80%81"><span class="toc-number">1.1.7.</span> <span class="toc-text">内核态与用户态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%80%81%E4%B8%8E%E5%86%85%E6%A0%B8%E6%80%81%E7%9A%84%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.7.1.</span> <span class="toc-text">用户态与内核态的空间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E6%A0%B8%E6%80%81%E4%B8%8E%E7%94%A8%E6%88%B7%E6%80%81%E5%88%87%E6%8D%A2"><span class="toc-number">1.1.7.2.</span> <span class="toc-text">内核态与用户态切换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%A4%9A%E6%A0%B8%E8%8A%AF%E7%89%87"><span class="toc-number">1.1.8.</span> <span class="toc-text">多线程和多核芯片</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.1.8.1.</span> <span class="toc-text">进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.1.8.2.</span> <span class="toc-text">线程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E6%A0%B8%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.1.8.2.1.</span> <span class="toc-text">内核线程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.1.8.2.2.</span> <span class="toc-text">用户线程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%86%85%E6%A0%B8%E7%BA%BF%E7%A8%8B%E5%88%87%E6%8D%A2"><span class="toc-number">1.1.8.2.3.</span> <span class="toc-text">用户线程和内核线程切换</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">1.2.</span> <span class="toc-text">存储器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E5%8D%B3L1%E7%BC%93%E5%AD%98%EF%BC%9A"><span class="toc-number">1.2.1.</span> <span class="toc-text">寄存器即L1缓存：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%8D%B3L2%E7%BC%93%E5%AD%98%EF%BC%9A"><span class="toc-number">1.2.2.</span> <span class="toc-text">高速缓存即L2缓存：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%EF%BC%9A"><span class="toc-number">1.2.3.</span> <span class="toc-text">内存：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A3%81%E7%9B%98"><span class="toc-number">1.3.</span> <span class="toc-text">磁盘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.1.</span> <span class="toc-text">原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B3%E5%9D%87%E5%AF%BB%E9%81%93%E6%97%B6%E9%97%B4"><span class="toc-number">1.3.2.</span> <span class="toc-text">平均寻道时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B3%E5%9D%87%E5%BB%B6%E8%BF%9F%E6%97%B6%E9%97%B4"><span class="toc-number">1.3.3.</span> <span class="toc-text">平均延迟时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%EF%BC%9A"><span class="toc-number">1.3.4.</span> <span class="toc-text">虚拟内存：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A3%81%E5%B8%A6"><span class="toc-number">1.4.</span> <span class="toc-text">磁带</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-O%E8%AE%BE%E5%A4%87%EF%BC%88%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%AE%BE%E5%A4%87%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">I&#x2F;O设备（输入输出设备）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E8%AE%BE%E5%A4%87"><span class="toc-number">1.5.1.</span> <span class="toc-text">输入设备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E8%AE%BE%E5%A4%87"><span class="toc-number">1.5.2.</span> <span class="toc-text">输出设备</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BA%BF"><span class="toc-number">1.6.</span> <span class="toc-text">总线</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E8%AE%A1%E7%AE%97%E6%9C%BA"><span class="toc-number">1.7.</span> <span class="toc-text">启动计算机</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/b3d2fee7.html" title="【2025最新】WSL+LaTex+VSCode安装教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202505142157033.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【2025最新】WSL+LaTex+VSCode安装教程"/></a><div class="content"><a class="title" href="/posts/b3d2fee7.html" title="【2025最新】WSL+LaTex+VSCode安装教程">【2025最新】WSL+LaTex+VSCode安装教程</a><time datetime="2025-05-14T13:19:41.000Z" title="发表于 2025-05-14 21:19:41">2025-05-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/98f2c182.html" title="【Bug】PPT出现“抱歉出现问题可能导致ppt不稳定”"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202505142125855.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Bug】PPT出现“抱歉出现问题可能导致ppt不稳定”"/></a><div class="content"><a class="title" href="/posts/98f2c182.html" title="【Bug】PPT出现“抱歉出现问题可能导致ppt不稳定”">【Bug】PPT出现“抱歉出现问题可能导致ppt不稳定”</a><time datetime="2024-12-30T08:43:18.000Z" title="发表于 2024-12-30 16:43:18">2024-12-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/29932e80.html" title="入党申请书"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202411071146539.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="入党申请书"/></a><div class="content"><a class="title" href="/posts/29932e80.html" title="入党申请书">入党申请书</a><time datetime="2024-11-03T15:52:25.000Z" title="发表于 2024-11-03 23:52:25">2024-11-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/56119828.html" title="保险学"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202411071451457.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="保险学"/></a><div class="content"><a class="title" href="/posts/56119828.html" title="保险学">保险学</a><time datetime="2024-10-29T16:32:54.000Z" title="发表于 2024-10-30 00:32:54">2024-10-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a102d742.html" title="金融与数学"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202406242330674.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="金融与数学"/></a><div class="content"><a class="title" href="/posts/a102d742.html" title="金融与数学">金融与数学</a><time datetime="2024-06-24T16:16:26.000Z" title="发表于 2024-06-25 00:16:26">2024-06-25</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 - 2025 By <a class="footer-bar-link" href="/" title="Prong" target="_blank">Prong</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">80</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">66</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">5</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://prong.ltd/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.png" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/37924260?spm_id_from=333.1007.0.0" title="B站"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://prong-1316442664.cos.ap-nanjing.myqcloud.com/picgo/202411082120808.webp" alt="B站"/><span class="back-menu-item-text">B站</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文库</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="fa-solid fa-timeline faa-tada"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="fas fa-tags faa-tada"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fas fa-folder-open faa-tada"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/messageboard/"><i class="fa fa-comments faa-tada"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 修仙</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/books/"><i class="fa-solid fa-book-open-reader faa-tada"></i><span> 书单</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/movies/"><i class="fa-solid fa-film faa-tada"></i><span> 电影</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/games/"><i class="fa-brands fa-xbox faa-tada"></i><span> 游戏</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="fa-brands fa-bilibili faa-tada"></i><span> 番剧</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/cinemas/"><i class="fa-brands fa-bilibili faa-tada"></i><span> B站追剧</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/update/"><i class="fa-solid fa-file-pen faa-tada"></i><span> 更新手账</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="fa-solid fa-person-through-window faa-tada"></i><span> 关于自己</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 0.88rem;">C++<sup>4</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">C语言<sup>5</sup></a><a href="/tags/PPT/" style="font-size: 0.88rem;">PPT<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>2</sup></a><a href="/tags/Zerotier/" style="font-size: 0.88rem;">Zerotier<sup>1</sup></a><a href="/tags/hexo/" style="font-size: 0.88rem;">hexo<sup>3</sup></a><a href="/tags/%E2%9C%92%EF%B8%8F%E9%9A%8F%E7%AC%94/" style="font-size: 0.88rem;">✒️随笔<sup>13</sup></a><a href="/tags/%E4%B8%89%E4%B8%8B%E4%B9%A1/" style="font-size: 0.88rem;">三下乡<sup>1</sup></a><a href="/tags/%E4%BF%9D%E9%99%A9%E5%AD%A6/" style="font-size: 0.88rem;">保险学<sup>1</sup></a><a href="/tags/%E5%95%86%E4%B8%9A%E9%93%B6%E8%A1%8C/" style="font-size: 0.88rem;">商业银行<sup>1</sup></a><a href="/tags/%E5%9B%BD%E5%80%BA/" style="font-size: 0.88rem;">国债<sup>1</sup></a><a href="/tags/%E5%9B%BD%E9%99%85%E8%B4%B8%E6%98%93/" style="font-size: 0.88rem;">国际贸易<sup>1</sup></a><a href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/" style="font-size: 0.88rem;">密码学<sup>1</sup></a><a href="/tags/%E5%BE%AE%E8%BD%AF%E8%BE%93%E5%85%A5%E6%B3%95/" style="font-size: 0.88rem;">微软输入法<sup>1</sup></a><a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 0.88rem;">摄影<sup>1</sup></a><a href="/tags/%E6%94%AF%E6%95%99%E6%97%A5%E8%AE%B0/" style="font-size: 0.88rem;">支教日记<sup>4</sup></a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">教程<sup>7</sup></a><a href="/tags/%E6%95%B0%E5%AD%97%E8%B4%A7%E5%B8%81/" style="font-size: 0.88rem;">数字货币<sup>1</sup></a><a href="/tags/%E6%A6%82%E7%8E%87%E8%AE%BA%E4%B8%8E%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1/" style="font-size: 0.88rem;">概率论与数理统计<sup>2</sup></a><a href="/tags/%E7%B2%AE%E9%A3%9F%E5%8D%B1%E6%9C%BA/" style="font-size: 0.88rem;">粮食危机<sup>1</sup></a><a href="/tags/%E7%BE%8E%E5%8C%96/" style="font-size: 0.88rem;">美化<sup>1</sup></a><a href="/tags/%E8%8C%85%E5%8F%B0/" style="font-size: 0.88rem;">茅台<sup>1</sup></a><a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 0.88rem;">论文<sup>7</sup></a><a href="/tags/%E9%AB%98%E7%B2%B1/" style="font-size: 0.88rem;">高粱<sup>1</sup></a><a href="/tags/%E9%AD%94%E6%94%B9/" style="font-size: 0.88rem;">魔改<sup>2</sup></a><a href="/tags/%F0%9F%92%B0%E5%BE%AE%E8%A7%82%E7%BB%8F%E6%B5%8E%E5%AD%A6/" style="font-size: 0.88rem;">💰微观经济学<sup>1</sup></a><a href="/tags/%F0%9F%93%93%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 0.88rem;">📓学习笔记<sup>43</sup></a><a href="/tags/%F0%9F%94%A0LaTeX/" style="font-size: 0.88rem;">🔠LaTeX<sup>1</sup></a><a href="/tags/%F0%9F%94%A0MarkDown/" style="font-size: 0.88rem;">🔠MarkDown<sup>1</sup></a><a href="/tags/%F0%9F%A6%8Bbutterfly/" style="font-size: 0.88rem;">🦋butterfly<sup>3</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2023 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Prong 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.cbd.int/katex@0.16.0/dist/katex.min.css"><script src="https://cdn.cbd.int/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    anzhiyu.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-snowy-two.vercel.app/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-snowy-two.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-snowy-two.vercel.app/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>